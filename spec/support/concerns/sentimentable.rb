shared_examples_for 'sentimentable' do
  # the class that includes the concern
  let(:model) do
    described_class
  end

  let!(:sentimentable) do
    factory_name = model.name.underscore.to_sym
    create(factory_name,
           transcript: 'bueno y la bueno una cerveza tarde no tienes nada bien sí como lo escuchas ahí ya viene así pero tardó en en este me agarrar o que si y ahorita te escuchas como entrecortada la voz ya no tengo nada sí aquí estoy es que estoy hablando con joven también ah sí oye y sí sí sigue oyendo mal y sigue todavía el como un ruido atrás secuencia te he dicho pero es que quiero otra en que sacan las llamadas porque pasa rápido o sea si yo te había marcado hace unas horas noves chavos no o sea ahorita tampoco se escucha perfecto hay que que hay que mejorar que ajustar no si tú como sí pero ya te has perdido mal [silence] allá ref lise bueno ahora ya ya es que se cuenta si este si si tuviera que no te puedo grabar pero si tuviera que decirte cómo te digo esto es así ya okay bueno ah ah no y luego se dio oye así okay ahorita se yo okay bueno aquí está cogerle escuchando todo por qué tal me falta ajustar este unas cosas no me escucha juan no me saludó pero sí le escuché aquí está tomando el fuel cansado no ya sé pobre hay que comprarle sus lentes para la computadora si no se va a quedarse o sí no hoy estuvo casi diez horas con los debe ser qué hace una cien tito para las hemorroides sino enfrente de es para computadora exacto mamita no pero bueno [silence] ya la hora de hoy al menos ya todas las redes ya proporcionado vio bien no nos falta ajustar una regla de marcación pero ya las vamos a hacer es este con calma porque hay muchos muchos casos pero mañana quedan vale bueno y sobre todo yo creo que ya mañana ir afinando todos estos detalles del edificio del lado de la voz o de ese tipo cosas exacto sí oiga y al final los ingenieros de usted creo que está más hasta la madre que ustedes es que bueno al menos yo estuve nada más un rato con joel pero sí lo sentí medio pobres de conocimiento osea nomás como quiera de medio le movían ya sabes saben que pasa que aquí entre no me chisme aron y no sé si fue él sabe esto ahí está me escucha joder si no escucha escuela ajá que no sé si saben esto pero cuando ustedes hicieron las primeras pruebas recuerdan las primeras pruebas de conexión con vettel ajá esas pruebas fueron con vestir best el okay o sea el best el que es la empresa original que tiene toda la infraestructura de carrer de caries que tiene una central telefónica protocolos distintos un equipo distinto de origen etcétera etcétera usted cuando se conectaron hicieron las pruebas sobre este monstruito original resulta ser que nosotros al momento de ya tener la relación comercial eh con best el i y y desde el punto de vista interno de ellos ver a dónde vamos a facturar y cómo vamos a facturar y comentará vamos en el proceso entramos bajo bajo metro red me torres no me metro red es una empresa que compró televisa y que funciona con best el pero metro retes otro email otra red otra central telefónica otro sistema todo entonces cuando se dan cuenta internamente que no va no ya cuando liberan esto el viernes que ella la viera no pasó nada y el lunes yo empiezo joder o sea ayer no sí si el lunes yo empiezo a joder y logró mi objetivo de que el director general diera el visto bueno y entonces este liberan cuando se da cuenta ingeniería que no es con v este él sino con metro revue [silence] se les vino el mundo encima porque es otro animal es otra cosa diferente se se come diferente no es ley mismo que entonces nos metimos en pedos internamente way y por eso había tanto desconocimiento del ex tipo de como integrarnos porque ya estamos integrados en otra cosa y nos mandaron a otra cosa mmm si nos dimos entonces a sus marcaciones son son totalmente diferentes configuraciones son totalmente diferente exactamente entonces ahí fue donde se empezó a a a a a complicar el el tema pues yo creo que es ahí donde donde vivieron la diferencia no joel si te acuerdes seguridad se hacen los durmió no aquí está pero escucha jueves pero si si escucha pero estoy de acuerdo con el que dios es así si tiene alguna de baile no estaba inmigradas lo que continuaron originalmente con una pregunta la semana pasada a la de hoy bueno me entiendes porque lo más papel tendríamos comentado es el tiempo necesario que que me dijo esta chava también o sea le dije a ver yo nomás te quiero decir una cosa o sea me dicen que esto casi nunca pasa pero tenían a no sé cuántos ingenieros y trajeron al del noc que es como la inminencia y lo mandaron aca porque trabajé en metro rer pues conoce perfectamente metro reedita le a ver perdóname pero también algo había de bronca interna que no sabían cómo resolver porque no creo que seamos un caso así de como no ajá mi hijo no si saber claramente tenemos una bronca pero bueno que bueno que hay va qué bueno que vaya tenemos donde le mando la no no no quería me mandó julieta la [silence] una imagen de de de tres mil impresiones de nuestra pauta ah sí es dos dos mil ochenta tres años alcanzada wow sí ay digo ahorita vamos a empezar a ver resultados de de la parte de la los productos no okay vale pues perfecto nada más eh raíz ósea oye si ganamos una batalla nos falta mañana pero este en lo que convertimos como como quedamos no la vamos a ir luchando para que todo salga bien vale órale ya ya ahorita ya ya digo no sé qué más van hacer pero descansen para que mañana si es que hay un muerto por eso para que mañana fresco sí veamos todo lo que nos falta y tal no sí sí segura tomate tomate un este muy bien tómate tu whisky joven no sé que tome pero ya que mamá me donde ayer no perdemos bueno no pero juanjo el fuel es buen tomador de perlas ah sí cierto me acordé que tiene buena garganta el cabrón aquí en creo que tengo cuatro mezcal es ésta como si nada ahí sí sí muy bueno bueno órale pues qué bueno que la puerta todo bien pues ya sí ahí vamos vale perfecto gracias nos hablado mañana temprano gracias si bay bay',
           key_phrases: nil,
           entities: nil,
           sentiment: nil)
  end

  it 'should transcribe if audiofile exists' do
    VCR.use_cassette('transcript_aws_comprehend') do
      result = sentimentable.aws_comprehend_analyze_and_save!
      expect(result).to eq(true)
      # data expectations
      expect(sentimentable.key_phrases).to be_present
      expect(sentimentable.entities).to be_present
      expect(sentimentable.sentiment).to be_present
    end
  end
end
